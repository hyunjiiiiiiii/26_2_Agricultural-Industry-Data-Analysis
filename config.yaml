# YOLOv11 토마토/방울토마토 탐지 프로젝트 설정

# 프로젝트 정보
project_name: "tomato_detection"
task: "detection"  # detection, segmentation, classification

# 데이터 경로
data:
  # AI Hub 토마토 데이터 (pretrain용)
  pretrain:
    images: "data/raw/pretrain/images"
    labels: "data/raw/pretrain/labels"
  
  # 방울토마토 데이터 (fine-tune용)
  finetune:
    images: "data/raw/finetune/images"
    labels: "data/raw/finetune/labels"
  
  # 처리된 데이터 경로
  processed:
    train: "data/processed/train"
    val: "data/processed/val"
    test: "data/processed/test"

# 클래스 정의
classes:
  names:
    - "tomato"  # 일반 토마토
    - "cherry_tomato"  # 방울토마토
  num_classes: 2

# 모델 설정
model:
  # Pretrain 설정
  pretrain:
    model_size: "yolo11n"  # n, s, m, l, x
    epochs: 100
    imgsz: 640
    batch: 16
    device: "cuda"  # Windows GPU에서 사용
    workers: 8
    patience: 50
    save_period: 10
  
  # Fine-tune 설정
  finetune:
    model_size: "yolo11n"
    epochs: 200
    imgsz: 1280  # 작은 병반 대응을 위한 고해상도
    batch: 8
    device: "cuda"
    workers: 8
    patience: 100
    save_period: 10
    # Pretrain 가중치 경로
    weights: "weights/pretrain/best.pt"

# 데이터 증강 설정
augmentation:
  # 작은 병반 대응
  mosaic: 1.0
  mixup: 0.1
  copy_paste: 0.0
  hsv_h: 0.015
  hsv_s: 0.7
  hsv_v: 0.4
  degrees: 10.0
  translate: 0.1
  scale: 0.5
  shear: 0.0
  perspective: 0.0
  flipud: 0.0
  fliplr: 0.5
  # 타일링 설정 (작은 객체 대응)
  tile_overlap: 0.25
  tile_size: 1280

# 학습 하이퍼파라미터
training:
  lr0: 0.01
  lrf: 0.01
  momentum: 0.937
  weight_decay: 0.0005
  warmup_epochs: 3.0
  warmup_momentum: 0.8
  warmup_bias_lr: 0.1
  box: 7.5
  cls: 0.5
  dfl: 1.5

# 검증 설정
validation:
  conf_threshold: 0.25
  iou_threshold: 0.45
  max_det: 300
  save_json: true
  save_hybrid: false

# 추론 설정
inference:
  conf_threshold: 0.25
  iou_threshold: 0.45
  max_det: 300
  imgsz: 1280
  device: "cuda"

# 경로 설정
paths:
  weights_dir: "weights"
  results_dir: "results"
  logs_dir: "results/logs"
  plots_dir: "results/plots"
  confusion_dir: "results/confusion"

